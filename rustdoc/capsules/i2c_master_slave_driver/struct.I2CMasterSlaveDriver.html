<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `I2CMasterSlaveDriver` struct in crate `capsules`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, I2CMasterSlaveDriver">

    <title>capsules::i2c_master_slave_driver::I2CMasterSlaveDriver - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Struct I2CMasterSlaveDriver</p><div class="block items"><ul><li><a href="#fields">Fields</a></li><li><a href="#methods">Methods</a></li><li><a href="#implementations">Trait Implementations</a></li></ul></div><p class='location'><a href='../index.html'>capsules</a>::<wbr><a href='index.html'>i2c_master_slave_driver</a></p><script>window.sidebarCurrent = {name: 'I2CMasterSlaveDriver', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>capsules</a>::<wbr><a href='index.html'>i2c_master_slave_driver</a>::<wbr><a class="struct" href=''>I2CMasterSlaveDriver</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../src/capsules/i2c_master_slave_driver.rs.html#54-62' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct I2CMasterSlaveDriver&lt;'a&gt; {
    i2c: &amp;'a <a class="trait" href="../../kernel/hil/i2c/trait.I2CMasterSlave.html" title="trait kernel::hil::i2c::I2CMasterSlave">I2CMasterSlave</a>,
    listening: <a class="struct" href="https://doc.rust-lang.org/nightly/core/cell/struct.Cell.html" title="struct core::cell::Cell">Cell</a>&lt;bool&gt;,
    master_action: <a class="struct" href="https://doc.rust-lang.org/nightly/core/cell/struct.Cell.html" title="struct core::cell::Cell">Cell</a>&lt;<a class="enum" href="../../capsules/i2c_master_slave_driver/enum.MasterAction.html" title="enum capsules::i2c_master_slave_driver::MasterAction">MasterAction</a>&gt;,
    master_buffer: <a class="struct" href="../../kernel/common/take_cell/struct.TakeCell.html" title="struct kernel::common::take_cell::TakeCell">TakeCell</a>&lt;'static, [u8]&gt;,
    slave_buffer1: <a class="struct" href="../../kernel/common/take_cell/struct.TakeCell.html" title="struct kernel::common::take_cell::TakeCell">TakeCell</a>&lt;'static, [u8]&gt;,
    slave_buffer2: <a class="struct" href="../../kernel/common/take_cell/struct.TakeCell.html" title="struct kernel::common::take_cell::TakeCell">TakeCell</a>&lt;'static, [u8]&gt;,
    app: <a class="struct" href="../../kernel/common/take_cell/struct.MapCell.html" title="struct kernel::common::take_cell::MapCell">MapCell</a>&lt;<a class="struct" href="../../capsules/i2c_master_slave_driver/struct.App.html" title="struct capsules::i2c_master_slave_driver::App">App</a>&gt;,
}</pre><h2 id='fields' class='fields'>Fields</h2><span id='structfield.i2c' class="structfield">
                           <span id='i2c.v' class='invisible'>
                           <code>i2c: &amp;'a <a class="trait" href="../../kernel/hil/i2c/trait.I2CMasterSlave.html" title="trait kernel::hil::i2c::I2CMasterSlave">I2CMasterSlave</a></code>
                           </span></span><span id='structfield.listening' class="structfield">
                           <span id='listening.v' class='invisible'>
                           <code>listening: <a class="struct" href="https://doc.rust-lang.org/nightly/core/cell/struct.Cell.html" title="struct core::cell::Cell">Cell</a>&lt;bool&gt;</code>
                           </span></span><span id='structfield.master_action' class="structfield">
                           <span id='master_action.v' class='invisible'>
                           <code>master_action: <a class="struct" href="https://doc.rust-lang.org/nightly/core/cell/struct.Cell.html" title="struct core::cell::Cell">Cell</a>&lt;<a class="enum" href="../../capsules/i2c_master_slave_driver/enum.MasterAction.html" title="enum capsules::i2c_master_slave_driver::MasterAction">MasterAction</a>&gt;</code>
                           </span></span><span id='structfield.master_buffer' class="structfield">
                           <span id='master_buffer.v' class='invisible'>
                           <code>master_buffer: <a class="struct" href="../../kernel/common/take_cell/struct.TakeCell.html" title="struct kernel::common::take_cell::TakeCell">TakeCell</a>&lt;'static, [u8]&gt;</code>
                           </span></span><span id='structfield.slave_buffer1' class="structfield">
                           <span id='slave_buffer1.v' class='invisible'>
                           <code>slave_buffer1: <a class="struct" href="../../kernel/common/take_cell/struct.TakeCell.html" title="struct kernel::common::take_cell::TakeCell">TakeCell</a>&lt;'static, [u8]&gt;</code>
                           </span></span><span id='structfield.slave_buffer2' class="structfield">
                           <span id='slave_buffer2.v' class='invisible'>
                           <code>slave_buffer2: <a class="struct" href="../../kernel/common/take_cell/struct.TakeCell.html" title="struct kernel::common::take_cell::TakeCell">TakeCell</a>&lt;'static, [u8]&gt;</code>
                           </span></span><span id='structfield.app' class="structfield">
                           <span id='app.v' class='invisible'>
                           <code>app: <a class="struct" href="../../kernel/common/take_cell/struct.MapCell.html" title="struct kernel::common::take_cell::MapCell">MapCell</a>&lt;<a class="struct" href="../../capsules/i2c_master_slave_driver/struct.App.html" title="struct capsules::i2c_master_slave_driver::App">App</a>&gt;</code>
                           </span></span><h2 id='methods'>Methods</h2><h3 class='impl'><span class='in-band'><code>impl&lt;'a&gt; <a class="struct" href="../../capsules/i2c_master_slave_driver/struct.I2CMasterSlaveDriver.html" title="struct capsules::i2c_master_slave_driver::I2CMasterSlaveDriver">I2CMasterSlaveDriver</a>&lt;'a&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/capsules/i2c_master_slave_driver.rs.html#64-80' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.new' class="method"><span id='new.v' class='invisible'><code>fn <a href='#method.new' class='fnname'>new</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;i2c: &amp;'a <a class="trait" href="../../kernel/hil/i2c/trait.I2CMasterSlave.html" title="trait kernel::hil::i2c::I2CMasterSlave">I2CMasterSlave</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;master_buffer: &amp;'static mut [u8], <br>&nbsp;&nbsp;&nbsp;&nbsp;slave_buffer1: &amp;'static mut [u8], <br>&nbsp;&nbsp;&nbsp;&nbsp;slave_buffer2: &amp;'static mut [u8]<br>) -&gt; <a class="struct" href="../../capsules/i2c_master_slave_driver/struct.I2CMasterSlaveDriver.html" title="struct capsules::i2c_master_slave_driver::I2CMasterSlaveDriver">I2CMasterSlaveDriver</a>&lt;'a&gt;</code></span></h4>
</div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><span class='in-band'><code>impl&lt;'a&gt; <a class="trait" href="../../kernel/hil/i2c/trait.I2CHwMasterClient.html" title="trait kernel::hil::i2c::I2CHwMasterClient">I2CHwMasterClient</a> for <a class="struct" href="../../capsules/i2c_master_slave_driver/struct.I2CMasterSlaveDriver.html" title="struct capsules::i2c_master_slave_driver::I2CMasterSlaveDriver">I2CMasterSlaveDriver</a>&lt;'a&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/capsules/i2c_master_slave_driver.rs.html#82-129' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.command_complete' class="method"><span id='command_complete.v' class='invisible'><code>fn <a href='../../kernel/hil/i2c/trait.I2CHwMasterClient.html#tymethod.command_complete' class='fnname'>command_complete</a>(&amp;self, buffer: &amp;'static mut [u8], error: <a class="enum" href="../../kernel/hil/i2c/enum.Error.html" title="enum kernel::hil::i2c::Error">Error</a>)</code></span></h4>
<div class='docblock'><p>Called when an I2C command completed. The <code>error</code> denotes whether the command completed successfully or if an error occured. <a href="../../kernel/hil/i2c/trait.I2CHwMasterClient.html#tymethod.command_complete">Read more</a></p>
</div></div><h3 class='impl'><span class='in-band'><code>impl&lt;'a&gt; <a class="trait" href="../../kernel/hil/i2c/trait.I2CHwSlaveClient.html" title="trait kernel::hil::i2c::I2CHwSlaveClient">I2CHwSlaveClient</a> for <a class="struct" href="../../capsules/i2c_master_slave_driver/struct.I2CMasterSlaveDriver.html" title="struct capsules::i2c_master_slave_driver::I2CMasterSlaveDriver">I2CMasterSlaveDriver</a>&lt;'a&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/capsules/i2c_master_slave_driver.rs.html#131-196' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.command_complete-1' class="method"><span id='command_complete.v-1' class='invisible'><code>fn <a href='../../kernel/hil/i2c/trait.I2CHwSlaveClient.html#tymethod.command_complete' class='fnname'>command_complete</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;buffer: &amp;'static mut [u8], <br>&nbsp;&nbsp;&nbsp;&nbsp;length: u8, <br>&nbsp;&nbsp;&nbsp;&nbsp;transmission_type: <a class="enum" href="../../kernel/hil/i2c/enum.SlaveTransmissionType.html" title="enum kernel::hil::i2c::SlaveTransmissionType">SlaveTransmissionType</a><br>)</code></span></h4>
<div class='docblock'><p>Called when an I2C command completed.</p>
</div><h4 id='method.read_expected' class="method"><span id='read_expected.v' class='invisible'><code>fn <a href='../../kernel/hil/i2c/trait.I2CHwSlaveClient.html#tymethod.read_expected' class='fnname'>read_expected</a>(&amp;self)</code></span></h4>
<div class='docblock'><p>Called from the I2C slave hardware to say that a Master has sent us a read message, but the driver did not have a buffer containing data setup, and therefore cannot respond. The I2C slave hardware will stretch the clock while waiting for the upper layer capsule to provide data to send to the remote master. Call <code>I2CSlave::read_send()</code> to provide data. <a href="../../kernel/hil/i2c/trait.I2CHwSlaveClient.html#tymethod.read_expected">Read more</a></p>
</div><h4 id='method.write_expected' class="method"><span id='write_expected.v' class='invisible'><code>fn <a href='../../kernel/hil/i2c/trait.I2CHwSlaveClient.html#tymethod.write_expected' class='fnname'>write_expected</a>(&amp;self)</code></span></h4>
<div class='docblock'><p>Called from the I2C slave hardware to say that a Master has sent us a write message, but there was no buffer setup to read the bytes into. The HW will stretch the clock while waiting for the user to call <code>I2CSlave::write_receive()</code> with a buffer. <a href="../../kernel/hil/i2c/trait.I2CHwSlaveClient.html#tymethod.write_expected">Read more</a></p>
</div></div><h3 class='impl'><span class='in-band'><code>impl&lt;'a&gt; <a class="trait" href="../../kernel/driver/trait.Driver.html" title="trait kernel::driver::Driver">Driver</a> for <a class="struct" href="../../capsules/i2c_master_slave_driver/struct.I2CMasterSlaveDriver.html" title="struct capsules::i2c_master_slave_driver::I2CMasterSlaveDriver">I2CMasterSlaveDriver</a>&lt;'a&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/capsules/i2c_master_slave_driver.rs.html#199-370' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.allow' class="method"><span id='allow.v' class='invisible'><code>fn <a href='../../kernel/driver/trait.Driver.html#method.allow' class='fnname'>allow</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;_appid: <a class="struct" href="../../kernel/callback/struct.AppId.html" title="struct kernel::callback::AppId">AppId</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;allow_num: usize, <br>&nbsp;&nbsp;&nbsp;&nbsp;slice: <a class="struct" href="../../kernel/mem/struct.AppSlice.html" title="struct kernel::mem::AppSlice">AppSlice</a>&lt;<a class="struct" href="../../kernel/mem/struct.Shared.html" title="struct kernel::mem::Shared">Shared</a>, u8&gt;<br>) -&gt; <a class="enum" href="../../kernel/returncode/enum.ReturnCode.html" title="enum kernel::returncode::ReturnCode">ReturnCode</a></code></span></h4>
<div class='docblock'><p><code>allow</code> lets an application give the driver access to a buffer in the application&#39;s memory. This returns <code>ENOSUPPORT</code> if not used. <a href="../../kernel/driver/trait.Driver.html#method.allow">Read more</a></p>
</div><h4 id='method.subscribe' class="method"><span id='subscribe.v' class='invisible'><code>fn <a href='../../kernel/driver/trait.Driver.html#method.subscribe' class='fnname'>subscribe</a>(&amp;self, subscribe_num: usize, callback: <a class="struct" href="../../kernel/callback/struct.Callback.html" title="struct kernel::callback::Callback">Callback</a>) -&gt; <a class="enum" href="../../kernel/returncode/enum.ReturnCode.html" title="enum kernel::returncode::ReturnCode">ReturnCode</a></code></span></h4>
<div class='docblock'><p><code>subscribe</code> lets an application pass a callback to the driver to be called later. This returns <code>ENOSUPPORT</code> if not used. <a href="../../kernel/driver/trait.Driver.html#method.subscribe">Read more</a></p>
</div><h4 id='method.command' class="method"><span id='command.v' class='invisible'><code>fn <a href='../../kernel/driver/trait.Driver.html#method.command' class='fnname'>command</a>(&amp;self, command_num: usize, data: usize, _: <a class="struct" href="../../kernel/callback/struct.AppId.html" title="struct kernel::callback::AppId">AppId</a>) -&gt; <a class="enum" href="../../kernel/returncode/enum.ReturnCode.html" title="enum kernel::returncode::ReturnCode">ReturnCode</a></code></span></h4>
<div class='docblock'><p><code>command</code> instructs a driver to perform some action synchronously. This returns <code>ENOSUPPORT</code> if not used. <a href="../../kernel/driver/trait.Driver.html#method.command">Read more</a></p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "capsules";
    </script>
    <script src="../../main.js"></script>
    <script defer src="../../search-index.js"></script>
</body>
</html>