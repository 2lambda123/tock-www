<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `SDCardDriver` struct in crate `capsules`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, SDCardDriver">

    <title>capsules::sdcard::SDCardDriver - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Struct SDCardDriver</p><div class="block items"><ul><li><a href="#fields">Fields</a></li><li><a href="#methods">Methods</a></li><li><a href="#implementations">Trait Implementations</a></li></ul></div><p class='location'><a href='../index.html'>capsules</a>::<wbr><a href='index.html'>sdcard</a></p><script>window.sidebarCurrent = {name: 'SDCardDriver', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>capsules</a>::<wbr><a href='index.html'>sdcard</a>::<wbr><a class="struct" href=''>SDCardDriver</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../src/capsules/sdcard.rs.html#1331-1335' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct SDCardDriver&lt;'a, A:&nbsp;<a class="trait" href="../../kernel/hil/time/trait.Alarm.html" title="trait kernel::hil::time::Alarm">Alarm</a> + 'a&gt; {
    sdcard: &amp;'a <a class="struct" href="../../capsules/sdcard/struct.SDCard.html" title="struct capsules::sdcard::SDCard">SDCard</a>&lt;'a, A&gt;,
    app: <a class="struct" href="../../kernel/common/take_cell/struct.MapCell.html" title="struct kernel::common::take_cell::MapCell">MapCell</a>&lt;<a class="struct" href="../../capsules/sdcard/struct.App.html" title="struct capsules::sdcard::App">App</a>&gt;,
    kernel_buf: <a class="struct" href="../../kernel/common/take_cell/struct.TakeCell.html" title="struct kernel::common::take_cell::TakeCell">TakeCell</a>&lt;'static, [u8]&gt;,
}</pre><div class='docblock'><p>Application driver for SD Card capsule, layers on top of SD Card capsule
This is used if the SDCard is going to be attached directly to userspace
syscalls. SDCardDriver can be ignored if another capsule is going to build
off of the SDCard instead</p>
</div><h2 id='fields' class='fields'>Fields</h2><span id='structfield.sdcard' class="structfield">
                           <span id='sdcard.v' class='invisible'>
                           <code>sdcard: &amp;'a <a class="struct" href="../../capsules/sdcard/struct.SDCard.html" title="struct capsules::sdcard::SDCard">SDCard</a>&lt;'a, A&gt;</code>
                           </span></span><span id='structfield.app' class="structfield">
                           <span id='app.v' class='invisible'>
                           <code>app: <a class="struct" href="../../kernel/common/take_cell/struct.MapCell.html" title="struct kernel::common::take_cell::MapCell">MapCell</a>&lt;<a class="struct" href="../../capsules/sdcard/struct.App.html" title="struct capsules::sdcard::App">App</a>&gt;</code>
                           </span></span><span id='structfield.kernel_buf' class="structfield">
                           <span id='kernel_buf.v' class='invisible'>
                           <code>kernel_buf: <a class="struct" href="../../kernel/common/take_cell/struct.TakeCell.html" title="struct kernel::common::take_cell::TakeCell">TakeCell</a>&lt;'static, [u8]&gt;</code>
                           </span></span><h2 id='methods'>Methods</h2><h3 class='impl'><span class='in-band'><code>impl&lt;'a, A:&nbsp;<a class="trait" href="../../kernel/hil/time/trait.Alarm.html" title="trait kernel::hil::time::Alarm">Alarm</a> + 'a&gt; <a class="struct" href="../../capsules/sdcard/struct.SDCardDriver.html" title="struct capsules::sdcard::SDCardDriver">SDCardDriver</a>&lt;'a, A&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/capsules/sdcard.rs.html#1358-1375' title='goto source code'>[src]</a></span></h3>
<div class='docblock'><p>Functions for SDCardDriver</p>
</div><div class='impl-items'><h4 id='method.new' class="method"><span id='new.v' class='invisible'><code>fn <a href='#method.new' class='fnname'>new</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;sdcard: &amp;'a <a class="struct" href="../../capsules/sdcard/struct.SDCard.html" title="struct capsules::sdcard::SDCard">SDCard</a>&lt;'a, A&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;kernel_buf: &amp;'static mut [u8; 512]<br>) -&gt; <a class="struct" href="../../capsules/sdcard/struct.SDCardDriver.html" title="struct capsules::sdcard::SDCardDriver">SDCardDriver</a>&lt;'a, A&gt;</code></span></h4>
<div class='docblock'><p>Create new SD card userland interface</p>

<p>sdcard - SDCard interface to provide application access to
kernel_buf - buffer used to hold SD card blocks, must be at least 512
    bytes in length</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><span class='in-band'><code>impl&lt;'a, A:&nbsp;<a class="trait" href="../../kernel/hil/time/trait.Alarm.html" title="trait kernel::hil::time::Alarm">Alarm</a> + 'a&gt; <a class="trait" href="../../capsules/sdcard/trait.SDCardClient.html" title="trait capsules::sdcard::SDCardClient">SDCardClient</a> for <a class="struct" href="../../capsules/sdcard/struct.SDCardDriver.html" title="struct capsules::sdcard::SDCardDriver">SDCardDriver</a>&lt;'a, A&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/capsules/sdcard.rs.html#1378-1429' title='goto source code'>[src]</a></span></h3>
<div class='docblock'><p>Handle callbacks from SDCard</p>
</div><div class='impl-items'><h4 id='method.card_detection_changed' class="method"><span id='card_detection_changed.v' class='invisible'><code>fn <a href='../../capsules/sdcard/trait.SDCardClient.html#tymethod.card_detection_changed' class='fnname'>card_detection_changed</a>(&amp;self, installed: bool)</code></span></h4>
<h4 id='method.init_done' class="method"><span id='init_done.v' class='invisible'><code>fn <a href='../../capsules/sdcard/trait.SDCardClient.html#tymethod.init_done' class='fnname'>init_done</a>(&amp;self, block_size: u32, total_size: u64)</code></span></h4>
<h4 id='method.read_done' class="method"><span id='read_done.v' class='invisible'><code>fn <a href='../../capsules/sdcard/trait.SDCardClient.html#tymethod.read_done' class='fnname'>read_done</a>(&amp;self, data: &amp;'static mut [u8], len: usize)</code></span></h4>
<h4 id='method.write_done' class="method"><span id='write_done.v' class='invisible'><code>fn <a href='../../capsules/sdcard/trait.SDCardClient.html#tymethod.write_done' class='fnname'>write_done</a>(&amp;self, buffer: &amp;'static mut [u8])</code></span></h4>
<h4 id='method.error' class="method"><span id='error.v' class='invisible'><code>fn <a href='../../capsules/sdcard/trait.SDCardClient.html#tymethod.error' class='fnname'>error</a>(&amp;self, error: u32)</code></span></h4>
</div><h3 class='impl'><span class='in-band'><code>impl&lt;'a, A:&nbsp;<a class="trait" href="../../kernel/hil/time/trait.Alarm.html" title="trait kernel::hil::time::Alarm">Alarm</a> + 'a&gt; <a class="trait" href="../../kernel/driver/trait.Driver.html" title="trait kernel::driver::Driver">Driver</a> for <a class="struct" href="../../capsules/sdcard/struct.SDCardDriver.html" title="struct capsules::sdcard::SDCardDriver">SDCardDriver</a>&lt;'a, A&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/capsules/sdcard.rs.html#1432-1507' title='goto source code'>[src]</a></span></h3>
<div class='docblock'><p>Connections to userspace syscalls</p>
</div><div class='impl-items'><h4 id='method.allow' class="method"><span id='allow.v' class='invisible'><code>fn <a href='../../kernel/driver/trait.Driver.html#method.allow' class='fnname'>allow</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;_appid: <a class="struct" href="../../kernel/callback/struct.AppId.html" title="struct kernel::callback::AppId">AppId</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;allow_num: usize, <br>&nbsp;&nbsp;&nbsp;&nbsp;slice: <a class="struct" href="../../kernel/mem/struct.AppSlice.html" title="struct kernel::mem::AppSlice">AppSlice</a>&lt;<a class="struct" href="../../kernel/mem/struct.Shared.html" title="struct kernel::mem::Shared">Shared</a>, u8&gt;<br>) -&gt; <a class="enum" href="../../kernel/returncode/enum.ReturnCode.html" title="enum kernel::returncode::ReturnCode">ReturnCode</a></code></span></h4>
<div class='docblock'><p><code>allow</code> lets an application give the driver access to a buffer in the application&#39;s memory. This returns <code>ENOSUPPORT</code> if not used. <a href="../../kernel/driver/trait.Driver.html#method.allow">Read more</a></p>
</div><h4 id='method.subscribe' class="method"><span id='subscribe.v' class='invisible'><code>fn <a href='../../kernel/driver/trait.Driver.html#method.subscribe' class='fnname'>subscribe</a>(&amp;self, subscribe_num: usize, callback: <a class="struct" href="../../kernel/callback/struct.Callback.html" title="struct kernel::callback::Callback">Callback</a>) -&gt; <a class="enum" href="../../kernel/returncode/enum.ReturnCode.html" title="enum kernel::returncode::ReturnCode">ReturnCode</a></code></span></h4>
<div class='docblock'><p><code>subscribe</code> lets an application pass a callback to the driver to be called later. This returns <code>ENOSUPPORT</code> if not used. <a href="../../kernel/driver/trait.Driver.html#method.subscribe">Read more</a></p>
</div><h4 id='method.command' class="method"><span id='command.v' class='invisible'><code>fn <a href='../../kernel/driver/trait.Driver.html#method.command' class='fnname'>command</a>(&amp;self, command_num: usize, data: usize, _: <a class="struct" href="../../kernel/callback/struct.AppId.html" title="struct kernel::callback::AppId">AppId</a>) -&gt; <a class="enum" href="../../kernel/returncode/enum.ReturnCode.html" title="enum kernel::returncode::ReturnCode">ReturnCode</a></code></span></h4>
<div class='docblock'><p><code>command</code> instructs a driver to perform some action synchronously. This returns <code>ENOSUPPORT</code> if not used. <a href="../../kernel/driver/trait.Driver.html#method.command">Read more</a></p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "capsules";
    </script>
    <script src="../../main.js"></script>
    <script defer src="../../search-index.js"></script>
</body>
</html>